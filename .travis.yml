sudo: false
language: python
python:
- '2.6'
- '2.7'
- pypy
- '3.3'
- '3.4'
- '3.5'
env:
- REQUIREMENTS=lowest
- REQUIREMENTS=current
install:
- pip install tox setuptools_scm
script:
- tox -e py-$REQUIREMENTS
notifications:
  email: false
  irc:
    channels:
    - chat.freenode.net#pocoo
    on_success: change
    on_failure: always
    use_notice: true
    skip_join: true
deploy:
  provider: pypi
  # username and encrypted password needed

  on:
    tags: true
    python: '2.7'
    distributions: bdist_wheel sdist
    repo: mitsuhiko/flask-sqlalchemy
